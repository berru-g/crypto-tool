1. Ajouter un fichier manifest.json

Ce fichier dÃ©crit les mÃ©tadonnÃ©es de ton application et permet l'installation sur les appareils des utilisateurs.

Ã‰tapes :

    CrÃ©er le fichier manifest.json Ã  la racine de ton projet avec le contenu suivant :

{
  "name": "FiboScope",
  "short_name": "FiboScope",
  "description": "Outil basÃ© sur le retracement de Fibonacci pour Ã©valuer la performance potentielle d'un token.",
  "start_url": "/index.html",
  "display": "standalone",
  "background_color": "#ffffff",
  "theme_color": "#000000",
  "icons": [
    {
      "src": "/img/icons/icon-192x192.png",
      "sizes": "192x192",
      "type": "image/png"
    },
    {
      "src": "/img/icons/icon-512x512.png",
      "sizes": "512x512",
      "type": "image/png"
    }
  ]
}

CrÃ©er les icÃ´nes mentionnÃ©es dans le fichier :

    Place les images aux dimensions 192x192 et 512x512 pixels dans le dossier /img/icons/.

Inclure le manifeste dans le fichier index.html :

    <link rel="manifest" href="/manifest.json">

2. Mettre en place un Service Worker

Le Service Worker permet Ã  ton application de fonctionner hors ligne et d'amÃ©liorer les performances en gÃ©rant le cache.

Ã‰tapes :

    CrÃ©er le fichier sw.js Ã  la racine de ton projet avec le contenu suivant :

self.addEventListener('install', function(event) {
  event.waitUntil(
    caches.open('fiboscope-cache').then(function(cache) {
      return cache.addAll([
        '/',
        '/index.html',
        '/style.css',
        '/script.js',
        // Ajoute ici les autres ressources Ã  mettre en cache
      ]);
    })
  );
});

self.addEventListener('fetch', function(event) {
  event.respondWith(
    caches.match(event.request).then(function(response) {
      return response || fetch(event.request);
    })
  );
});

Enregistrer le Service Worker dans ton fichier script.js principal :

    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('/sw.js')
        .then(function(registration) {
          console.log('Service Worker enregistrÃ© avec succÃ¨s:', registration);
        })
        .catch(function(error) {
          console.log('Ã‰chec de l\'enregistrement du Service Worker:', error);
        });
    }

3. S'assurer que le site est servi via HTTPS

Les PWA nÃ©cessitent une connexion sÃ©curisÃ©e. Si ton site n'est pas dÃ©jÃ  en HTTPS, envisage de le faire. Si tu utilises Netlify pour l'hÃ©bergement, il propose des certificats SSL gratuits.
4. Tester la PWA

AprÃ¨s avoir mis en place ces Ã©lÃ©ments :

    Utiliser les outils de dÃ©veloppement de ton navigateur (par exemple, Chrome DevTools) pour tester le fonctionnement de la PWA.
    VÃ©rifier que l'application peut Ãªtre installÃ©e sur un appareil mobile et qu'elle fonctionne hors ligne.

En suivant ces Ã©tapes, tu pourras transformer ton site FiboScope en une Progressive Web App, offrant une expÃ©rience utilisateur amÃ©liorÃ©e et des fonctionnalitÃ©s proches d'une application native.

/// Notif RWA sur l'app meme fermÃ© = MA50.js


// Migration vers Astro

1ï¸âƒ£ Installer Astro

ğŸ“Œ PrÃ©requis : Assure-toi dâ€™avoir Node.js installÃ© (v16+ recommandÃ©).

ğŸ‘‰ Ouvre un terminal et exÃ©cute :

npm create astro@latest my-project
cd my-project
npm install
npm run dev

ğŸ”¹ Cela crÃ©e un dossier my-project avec un site Astro de base.
ğŸ”¹ npm run dev dÃ©marre le serveur en local.
2ï¸âƒ£ Organiser ton projet

Dans Astro, tu peux structurer ton site comme ceci :

/src
 â”œâ”€â”€ /components    â†’ Fichiers rÃ©utilisables (Header, Footer, etc.)
 â”œâ”€â”€ /pages         â†’ Tes pages principales (`index.astro`, `about.astro`)
 â”œâ”€â”€ /layouts       â†’ Templates globaux (ex: `BaseLayout.astro`)
 â”œâ”€â”€ /styles        â†’ Fichiers CSS (optionnel)

ğŸ‘‰ DÃ©place ton HTML dans /pages
Si tu as un index.html, renomme-le en index.astro et mets-y ton code.
3ï¸âƒ£ Convertir les includes (header, footer, etc.)

En PHP, tu faisais :

<?php include('header.php'); ?>

En Astro, tu crÃ©es un composant Header.astro dans /src/components/ :

---
// Pas de script ici, c'est juste du HTML
---
<header>
  <h1>Mon Site</h1>
  <nav>
    <a href="/">Accueil</a>
    <a href="/about">Ã€ propos</a>
  </nav>
</header>

Ensuite, dans tes pages, tu lâ€™intÃ¨gres comme ceci :

---
import Header from "../components/Header.astro";
---
<Header />
<h1>Bienvenue sur mon site</h1>

Fais pareil avec Footer.astro et tout ce que tu rÃ©utilises. ğŸ¯
4ï¸âƒ£ Ajouter du CSS & JS

Astro te laisse le choix :
âœ”ï¸ Tu peux garder ton CSS en lâ€™Ã©tat et lâ€™importer dans src/styles/.
âœ”ï¸ Tu peux aussi Ã©crire du CSS directement dans tes fichiers .astro :

<style>
  h1 {
    color: red;
  }
</style>

âœ”ï¸ Pour le JS, Astro le charge uniquement si nÃ©cessaire (plus rapide que React).
5ï¸âƒ£ Convertir les scripts JavaScript

ğŸ”¹ Si ton site a dÃ©jÃ  du JS (ex: script.js), Astro te permet de lâ€™importer dans tes fichiers .astro :

<script src="/scripts/script.js"></script>

ğŸ”¹ Si tu veux utiliser du JS interactif, utilise <script> dans un composant :

---
import { onMount } from "astro/runtime";

onMount(() => {
  console.log("Page chargÃ©e !");
});
---

6ï¸âƒ£ DÃ©ployer ton site ğŸš€

1ï¸âƒ£ Build ton projet :

npm run build

2ï¸âƒ£ DÃ©ploie sur Netlify (ou autre hÃ©bergeur statique) :

    Si tu utilises GitHub â†’ Connecte ton repo Ã  Netlify.

    Si tu veux dÃ©ployer manuellement â†’

        Va sur Netlify Drop.

        Glisse ton dossier dist/.

ğŸ‰ Ton site est maintenant en Astro et dÃ©ployÃ© sur Netlify !
